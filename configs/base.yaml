data:
  data_root: "data/gridsat_patches"
  dataset_index: "data/dataset_index.json"
  class_balance_alpha: 0.6
  batch_size: 4
  image_size: 256
  bt_min_k: 117.0
  bt_max_k: 348.0
  split_dir: data/splits
  eval_seed: 42
  eval_mode: full
  val_balanced_per_class: 5 # used only when eval_mode: balanced_fixed

conditioning:
  num_ss_classes: 6           # 0-5 Saffir-Simpson categories
  use_wind_speed: false       # we'll wire this later
  use_basin: false            # placeholder
  cfg_drop_prob: 0.1
  
model:
  base_channels: 32
  channel_mults: [1, 2, 4]
  num_res_blocks: 2
  attention_resolutions: []   # no attention yet
  dropout: 0.0

diffusion:
  num_steps: 1000
  beta_schedule: "linear"
  loss_type: "eps_mse"
  dynamic_threshold: true
  dynamic_threshold_p: 0.995

training:
  num_epochs: 50
  steps_per_epoch: 2000
  lr: 1e-4
  ema_decay: 0.9999
  log_interval_steps: 10
  mixed_precision: false
  val_every_epochs: 1
  early_stopping:
    enabled: true
    patience_epochs: 10   # number of epochs with no improvement before stopping
    min_delta: 1.0e-4     # minimum improvement in loss to count as "better"

evaluation:
  n_per_class_heavy: 50
  gen_batch_size: null       # micro-batch for generation; null -> use data.batch_size

  # generation settings
  guidance_scale: 0.0         # set >0 once you rely on CFG at inference
  sampler: "ddpm"             # "ddpm" supported; can extend later
  seed: 123

  # real reference sampling (matched by class)
  real_seed: 123

  # feature + diversity
  profile_bins: 96            # radial bins for profiles (higher -> more detailed, slower)
  psd_bins: 96                # radial bins for power spectrum

  proxy_classifier:
    enabled: true
    max_train_per_class: 2000
    C: 1.0
    solver: "lbfgs"
    max_iter: 200

directories:
  windows_samples_path: "/mnt/c/Users/guido/Desktop/sample.png"
